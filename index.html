<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>I'm Sorry ‚Äî Pinky Promise</title>
  <style>
    :root{
      --bg1:#ffdee9;
      --bg2:#b5fffc;
      --glass: rgba(255,255,255,0.25);
      --border: rgba(255,255,255,0.6);
      --text:#2a2a2a;
      --accent:#ff4b91;
      --accent2:#7a5cff;
      --good:#00c389;
      --shadow: 0 10px 30px rgba(0,0,0,0.15);
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      overflow:hidden;
      background: radial-gradient(1200px 800px at 10% 10%, #ffe8f3 0%, transparent 60%),
                  radial-gradient(1200px 800px at 90% 20%, #e6f9ff 0%, transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      animation: bgPulse 12s ease-in-out infinite alternate;
    }
    @keyframes bgPulse{to{filter:hue-rotate(10deg) brightness(1.05)}}

    /* floating hearts */
    .hearts{position:fixed;inset:0;pointer-events:none;z-index:0}
    .heart{position:absolute; font-size:18px; opacity:.15; animation: floatUp linear infinite;}
    @keyframes floatUp{from{transform:translateY(20vh) scale(.8)} to{transform:translateY(-120vh) scale(1.2)}}

    .wrap{position:relative; z-index:1; height:100%; display:grid; place-items:center; padding:24px}

    .card{
      position:relative;
      width:min(860px, 96vw);
      min-height:460px;
      padding:28px 28px 22px 28px;
      border-radius:24px;
      background: var(--glass);
      backdrop-filter: blur(14px) saturate(120%);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .badge{
      position:absolute; top:18px; right:18px;
      background:rgba(0,0,0,.06); border:1px dashed rgba(0,0,0,.15);
      padding:6px 10px; border-radius:999px; font-size:12px; letter-spacing:.2px;
    }

    .title{
      display:flex; align-items:center; gap:10px; margin:6px 0 8px;
    }
    .title .emoji{
      width:44px; height:44px; display:grid; place-items:center; border-radius:12px;
      background: conic-gradient(from 180deg at 50% 50%, #ffd1e8, #d1eaff, #ffd1e8);
      box-shadow: inset 0 0 12px rgba(255,255,255,.8);
      animation: spin 8s linear infinite;
    }
    @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
    h1{font-size:28px; margin:0; line-height:1.2}
    p{margin:8px 0; font-size:16px}

    .type{font-size:18px; line-height:1.6; min-height:94px}
    .cursor{display:inline-block; width:10px; background:var(--text); animation: blink 1s steps(1) infinite}
    @keyframes blink{50%{opacity:0}}

    .actions{display:flex; flex-wrap:wrap; gap:12px; margin-top:14px}
    .btn{
      appearance:none; border:none; cursor:pointer; padding:12px 16px; border-radius:14px;
      background:linear-gradient(135deg, #ff8fc7, #ff4b91); color:white; font-weight:700; letter-spacing:.2px;
      box-shadow: 0 10px 18px rgba(255,75,145,.3);
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover{transform: translateY(-2px)}
    .btn:active{transform: translateY(0); filter:brightness(.95)}
    .btn.ghost{
      background:linear-gradient(135deg,#e8e8ff,#d9c9ff); color:#3a2f7f; box-shadow:0 10px 18px rgba(122,92,255,.25);
    }

    .promise{
      margin-top:14px; display:grid; grid-template-columns: 1fr 1fr; gap:18px; align-items:center;
    }
    .pinky-stage{
      position:relative; background:rgba(255,255,255,.5); border:1px solid var(--border); border-radius:18px;
      height:160px; display:grid; place-items:center; overflow:hidden;
    }
    /* Pinky fingers (simple + cute) */
    .pinky{
      position:absolute; bottom:30px; width:120px; height:28px; background: #ffb3cd; border-radius:20px; box-shadow: inset 0 -3px 0 #ff8fb6;
      transform-origin: right center;
      transition: transform .8s cubic-bezier(.2,.8,.2,1);
    }
    .pinky.left{left:8%; transform: rotate(14deg)}
    .pinky.right{right:8%; transform-origin:left center; transform: rotate(-14deg)}
    .palm{
      position:absolute; bottom:30px; width:64px; height:64px; background:#ffd6e5; border-radius:18px; box-shadow: inset 0 -4px 0 #ffc0d8;
    }
    .palm.left{left:2%}
    .palm.right{right:2%}
    .hooked .pinky.left{transform: translateX(40px) rotate(0)}
    .hooked .pinky.right{transform: translateX(-40px) rotate(0)}

    .caption{font-size:14px; text-align:center; opacity:.8; padding:8px}

    .commit{
      background:rgba(255,255,255,.6); border:1px solid var(--border); border-radius:18px; padding:14px 16px;
    }
    .commit h3{margin:0 0 8px; font-size:16px}
    .commit ul{margin:0; padding-left:18px}
    .commit li{margin:6px 0}

    .slider-area{margin-top:16px; background:rgba(0,0,0,.05); border-radius:14px; padding:14px; border:1px solid rgba(0,0,0,.07)}
    .slider-area label{display:block; font-size:14px; opacity:.8; margin-bottom:8px}
    input[type="range"]{width:100%}

    .toast{
      position:fixed; left:50%; bottom:28px; transform:translateX(-50%) translateY(20px);
      opacity:0; background:#111; color:#fff; padding:12px 16px; border-radius:999px; box-shadow:var(--shadow);
      transition: all .4s ease; z-index:3; font-size:14px
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(0)}

    /* Overlay unlock */
    .gate{
      position:fixed; inset:0; display:grid; place-items:center; background:linear-gradient(135deg, #ffe1ef, #e8f9ff);
      z-index:5; transition: opacity .5s ease, visibility .5s ease; box-shadow: inset 0 0 120px rgba(0,0,0,.06);
    }
    .gate.hide{opacity:0; visibility:hidden}
    .gate .panel{
      background:#fff; border:1px solid #f1d9e6; border-radius:20px; box-shadow: var(--shadow);
      padding:24px; text-align:center; width:min(420px, 92vw);
    }
    .hold{
      position:relative; display:inline-grid; place-items:center; margin-top:10px;
      width:260px; height:56px; border-radius:999px; overflow:hidden; border:1px solid #ffd2e4;
      background:linear-gradient(135deg,#fff0f7,#ffffff);
    }
    .hold .bar{position:absolute; left:0; top:0; bottom:0; width:0; background:linear-gradient(135deg,#ff9ece,#ff4b91)}
    .hold button{position:relative; background:transparent; border:none; font-weight:700; letter-spacing:.3px; cursor:pointer}
    .hint{font-size:12px; opacity:.7; margin-top:6px}

    /* Confetti canvas */
    canvas#confetti{position:fixed; inset:0; pointer-events:none; z-index:4}

    /* Small screens */
    @media (max-width: 720px){
      .promise{grid-template-columns:1fr}
      .pinky-stage{height:140px}
      .pinky{width:100px}
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="hearts"></div>

  <div class="gate" id="gate">
    <div class="panel">
      <h2 style="margin:0 0 6px">A tiny request before you read‚Ä¶</h2>
      <p style="margin:0 0 10px">Press & hold for a second to unlock my message. I put my heart into this. ü´∂</p>
      <div class="hold" id="hold">
        <div class="bar" id="holdBar"></div>
        <button id="holdBtn" aria-label="Hold to unlock">Hold to unlock</button>
      </div>
      <div class="hint">(Let go early to cancel)</div>
    </div>
  </div>

  <div class="wrap">
    <div class="card">
      <div class="badge">From one engineer to the bravest girl I know</div>
      <div class="title">
        <div class="emoji">üíó</div>
        <div>
          <h1>I'm sorry for hiding my problem.</h1>
          <p>I should‚Äôve trusted you with the messy parts too. Here's me making it right.</p>
        </div>
      </div>

      <div class="type" id="type"></div>

      <div class="actions">
        <button class="btn" id="pinkyBtn">ü§ù Pinky Promise</button>
        <button class="btn ghost" id="moreBtn">My commitments</button>
        <button class="btn" id="coffeeBtn">Coffee & talk?</button>
      </div>

      <div class="promise">
        <div class="pinky-stage" id="pinkyStage" aria-live="polite">
          <div class="palm left"></div>
          <div class="palm right"></div>
          <div class="pinky left"></div>
          <div class="pinky right"></div>
          <div class="caption" id="pinkyCaption">Tap ‚ÄúPinky Promise‚Äù to link fingers üíû</div>
        </div>
        <div class="commit" id="commit" hidden>
          <h3>What I'll do from now on:</h3>
          <ul>
            <li>Speak up early ‚Äî even when I‚Äôm scared or confused.</li>
            <li>Ask for help instead of hiding it .</li>
            <li>And thats it CB, no more commitments i am not salman khan.</li>
          </ul>
          <div class="slider-area">
            <label for="forgive">Slide to forgive (optional) ‚Üí</label>
            <input id="forgive" type="range" min="0" max="100" value="0" />
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="toast" id="toast">Thank you for hearing me. ‚ù§Ô∏è</div>

  <script>
    // Floating hearts background
    const hearts = document.getElementById('hearts');
    function spawnHearts(){
      for(let i=0;i<24;i++){
        const h=document.createElement('div');
        h.className='heart';
        h.textContent = Math.random()>0.5 ? '‚ù§' : 'üíó';
        const left = Math.random()*100;
        const dur = 12 + Math.random()*14;
        const delay = Math.random()*-20;
        h.style.left = left+'%';
        h.style.animationDuration = dur+'s';
        h.style.animationDelay = delay+'s';
        hearts.appendChild(h);
      }
    }
    spawnHearts();

    // Typewriter
    const message = "I‚Äôm truly sorry for hiding my problem. You deserved my honesty, not my silence. From today, no more secrets ‚Äî only courage, clarity, and us facing things together. If you‚Äôll let me, I‚Äôd love to talk and make this right.";
    const typeEl = document.getElementById('type');
    function typeWrite(text, el, speed=22){
      el.innerHTML = '';
      const cursor = document.createElement('span');
      cursor.className='cursor';
      let i=0;
      const int = setInterval(()=>{
        el.innerHTML = text.slice(0, i++);
        el.appendChild(cursor);
        if(i>text.length){
          clearInterval(int);
          cursor.remove();
        }
      }, speed);
    }

    // Pinky promise animation
    const pinkyBtn = document.getElementById('pinkyBtn');
    const stage = document.getElementById('pinkyStage');
    const caption = document.getElementById('pinkyCaption');
    let hooked=false;
    pinkyBtn.addEventListener('click', ()=>{
      hooked = !hooked;
      stage.classList.toggle('hooked', hooked);
      caption.textContent = hooked ? "Linked. I‚Äôll never hide things again ‚Äî pinky promise." : "Tap ‚ÄúPinky Promise‚Äù to link fingers üíû";
      pulse(stage);
    });

    function pulse(el){
      el.animate([
        {transform:'scale(1)'}, {transform:'scale(1.02)'}, {transform:'scale(1)'}
      ],{duration:420, easing:'cubic-bezier(.2,.8,.2,1)'});
    }

    // Commitments toggle
    const moreBtn = document.getElementById('moreBtn');
    const commit = document.getElementById('commit');
    moreBtn.addEventListener('click', ()=>{
      commit.hidden = !commit.hidden;
      moreBtn.textContent = commit.hidden ? 'My commitments' : 'Hide commitments';
      pulse(commit);
    });

    // Coffee toast
    const coffeeBtn = document.getElementById('coffeeBtn');
    const toast = document.getElementById('toast');
    coffeeBtn.addEventListener('click', ()=>{
      showToast('Can I buy you a coffee and talk this out? ‚òï');
    });

    function showToast(text){
      toast.textContent = text;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 2600);
    }

    // Slide to forgive ‚Üí confetti
    const forgive = document.getElementById('forgive');
    forgive && forgive.addEventListener('input', (e)=>{
      const v = +e.target.value;
      if(v>=100){
        fireConfetti();
        showToast('Thank you for forgiving me. I will do better. ‚ù§Ô∏è');
        setTimeout(()=>{ e.target.value = 0; }, 800);
      }
    });

    // Unlock gate (press & hold)
    const gate = document.getElementById('gate');
    const hold = document.getElementById('hold');
    const holdBtn = document.getElementById('holdBtn');
    const holdBar = document.getElementById('holdBar');
    let holdTimer=null, progressInt=null, progress=0;

    const startHold = ()=>{
      clearTimeout(holdTimer); clearInterval(progressInt); progress=0; holdBar.style.width='0%';
      holdTimer = setTimeout(()=>{
        gate.classList.add('hide');
        typeWrite(message, typeEl);
      }, 1200);
      progressInt = setInterval(()=>{
        progress=Math.min(progress+6, 100); holdBar.style.width=progress+'%';
      }, 60);
    };
    const cancelHold = ()=>{ clearTimeout(holdTimer); clearInterval(progressInt); holdBar.style.width='0%'; };

    ['mousedown','touchstart'].forEach(ev=> hold.addEventListener(ev, startHold));
    ['mouseup','mouseleave','touchend','touchcancel'].forEach(ev=> hold.addEventListener(ev, cancelHold));

    // Confetti implementation
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W,H; const pieces=[];
    function resize(){ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight }
    window.addEventListener('resize', resize); resize();

    function fireConfetti(){
      for(let i=0;i<220;i++){
        pieces.push({
          x: W/2 + (Math.random()-0.5)*W*0.6,
          y: H/2 + (Math.random()-0.5)*40,
          r: 4+Math.random()*6,
          a: Math.random()*Math.PI*2,
          v: 2+Math.random()*3,
          w: -0.2+Math.random()*0.4,
          life: 60+Math.random()*140
        });
      }
    }
    function tick(){
      ctx.clearRect(0,0,W,H);
      for(let i=pieces.length-1;i>=0;i--){
        const p = pieces[i];
        p.life -= 1; if(p.life<=0){ pieces.splice(i,1); continue; }
        p.y += p.v; p.x += Math.cos(p.a); p.a += p.w;
        ctx.save();
        ctx.translate(p.x,p.y); ctx.rotate(p.a);
        ctx.fillStyle = `hsl(${(p.x/W)*360}, 90%, 60%)`;
        ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r);
        ctx.restore();
      }
      requestAnimationFrame(tick);
    }
    tick();

    // Start with a tiny confetti burst to grab attention after unlock
    document.addEventListener('visibilitychange', ()=>{
      if(!document.hidden && gate.classList.contains('hide')){ fireConfetti(); }
    });
  </script>
</body>
</html>
